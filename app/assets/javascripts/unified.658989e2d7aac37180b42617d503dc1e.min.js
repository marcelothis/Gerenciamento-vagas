function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return null==results?"":decodeURIComponent(results[1].replace(/\+/g," "))}function showSectionFromQueryString(){var section=getParameterByName("secao");$(".section-help").addClass("hide"),$(".section-"+section).removeClass("hide"),$(".section-"+section).addClass("active"),$("li").filter(function(){return this.id.match(/section-.+/)}).removeClass("active"),$("#section-"+section).addClass("active");var item=getParameterByName("item");if(void 0!=item&&item.length>0){var element_to_scroll_to=document.getElementById(item);element_to_scroll_to.scrollIntoView()}}function printOnLoad(){var print=getParameterByName("print");1==print&&window.print()}function printPage(){window.print()}function myToggle(id){$("#"+id).slideToggle({duration:200,easing:"swing"})}function urlRedirect(url){window.location=url}function changeURI(uri){window.history.pushState("","",uri)}function editar(id){$("#"+id).fadeIn("slow"),$("#bar-editar-"+id).addClass("hide"),$("#bar-editar-titularidade-"+id).addClass("hide"),$("#dados-titularidade-"+id).removeClass("dados-titularidade"),$("#dados-titularidade-"+id).addClass("dados-titularidade-active")}function fechar(id){$("#"+id).hide(),$("#bar-editar-"+id).removeClass("hide"),$("#bar-editar-titularidade-"+id).removeClass("hide"),$("#dados-titularidade-"+id).addClass("dados-titularidade"),$("#dados-titularidade-"+id).removeClass("dados-titularidade-active")}function ajuda(id){$(".section-help").addClass("hide"),$(".section-"+id).removeClass("hide"),$(".section-"+id).addClass("active"),$("li").filter(function(){return this.id.match(/section-.+/)}).removeClass("active"),$("#section-"+id).addClass("active")}function entidade_existe(){$.post("/cgi-bin/nicbr/entidade_existe",{doc:$("#nova_entidade").val()},function(data){var exists=$.trim(data);"0"===exists?($("#nova_entidade_erro").remove(),"none"===$("#entidadeSemCadastro").css("display")&&$("#entidadeSemCadastro").slideToggle("slow",function(){$("#entidadeSemCadastro").css("display","block")})):"1"===exists?($("#nova_entidade_erro").remove(),"block"===$("#entidadeSemCadastro").css("display")&&$("#entidadeSemCadastro").slideToggle("slow",function(){$("#entidadeSemCadastro").css("display","none")})):"-1"===exists&&(0===$("#nova_entidade_erro").length&&$(document.createElement("span")).text("Documento InvÃ¡lido").attr("id","nova_entidade_erro").css("color","red").css("margin-left","10px").insertAfter("#nova_entidade"),"block"===$("#entidadeSemCadastro").css("display")&&$("#entidadeSemCadastro").slideToggle("slow",function(){$("#entidadeSemCadastro").css("display","none")}))},"text")}function exibirCampoResponsaveis(){var camposExibidos=2;""!=$("#nome3").val()&&(camposExibidos++,$("#informacoesEntidade3").css("display","block")),camposExibidos>=3&&$("#acrescentarResponsavel").hide(),$("#acrescentarResponsavel").click(function(){camposExibidos>=3||(camposExibidos++,$("#informacoesEntidade"+camposExibidos).slideDown("normal"),camposExibidos>=3&&$(this).fadeOut())})}function consulta_cep(){$.post("/cgi-bin/nicbr/consulta_cep",{cep:$("#cep").val()},function(data){""!=data&&("1"==data.status?($("#cep").val(data.cep),$("#logradouro").val(data.street),$("#cidade").val(data.city),$("#estado").val(data.state),$("#erro_cep").css("display","none")):($("#erro_cep").html(data.message),$("#erro_cep").css("display","inline"),$("#erro_cep").css("color","red"),$("#erro_cep").css("font-style","italic")))},"json")}function buscarUsuario(){if(""==$.trim($("#id").val()))return!0;$("body").fadeTo(.5,.3);var options={url:"/cgi-bin/nicbr/busca_usuario",dataType:"text",contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",data:{handle:$("#id").val()},success:function(data){""==$.trim(data)?($("#label_id").text("UsuÃ¡rio nÃ£o encontrado."),$("#label_id").css("color","red")):($("#label_id").text(data),$("#label_id").css("color","black"))},error:function(jqXHR,textStatus,errorThrown){var msg="Ao tentar buscar o usuÃ¡rio '"+$("#id").val()+"', o seguinte erro ocorreu: "+errorThrown+". Tente novamente mais tarde por favor, caso o erro persista entre em contato com o suporte.";alert(msg)}};return $.ajax(options),$("cnpj").focus(),$("body").fadeTo(.5,1),!0}function ReabController($scope,$http){$("#id").focus(),$scope.user={},$scope.user.name="",$scope.msg="",$scope.buscarUsuario=function(){if(!($scope.user.id.length<3)){var uri="/cgi-bin/nicbr/busca_usuario?handle="+$scope.user.id;$http.get(uri).success(function(data){""==$.trim(data)?$scope.msg="UsuÃ¡rio nÃ£o encontrado.":$scope.user.name=data}).error(function(errorThrown){var msg="Ao tentar buscar o usuÃ¡rio '"+$scope.user.id+"', o seguinte erro ocorreu: "+errorThrown+". Tente novamente mais tarde por favor, caso o erro persista entre em contato com o suporte.";alert(msg)})}}}function getDocumentType(document){return document=document.replace("-","","g"),document=document.replace(/\./g,"","g"),document=document.replace("/","","g"),11==document.length?"CPF":14==document.length?"CNPJ":""}function formatDocument(document){document=document.replace("-",""),document=document.replace(/\./g,""),document=document.replace("/",""),15==document.length&&"0"==document.substr(0,1)&&(document=document.substr(1,14));var docType=getDocumentType(document),result="";return"CPF"==docType?result=document.substr(0,3)+"."+document.substr(3,3)+"."+document.substr(6,3)+"-"+document.substr(9,2):"CNPJ"==docType&&(result=document.substr(0,2)+"."+document.substr(2,3)+"."+document.substr(5,3)+"/"+document.substr(8,4)+"-"+document.substr(12,2)),result}function panelController($scope,shared){$scope.getActiveTab=function(){return shared.properties.activeTab},$scope.toBotomAndFocus=function(){window.scrollTo(0,document.body.scrollHeight),document.getElementById("fqdn").focus()}}function DomainsCtrl($scope,$http,$timeout,$window){$scope.currentPage=0,$scope.pageSize=10,$scope.hash="",$scope.domains=[],$scope.loading=!0,$scope.domainCount=function(){var result=$scope.domains.length;return $scope.filtered&&(result=$scope.filtered.length),result},$scope.setPage=function(n){$scope.currentPage=n-1},$scope.setPageSize=function(n){$scope.pageSize=n},$scope.getCurrentPage=function(){return $scope.currentPage+1},$scope.getImage=function(type){return"OWNER"==type?"contact-type-ico-menu-contato-titularidade_cinza":"ADM"==type?"contact-type-ico-menu-administrador_cinza":"TEC"==type?"contact-type-ico-menu-contato-tecnico_cinza":"COB"==type?"contact-type-ico-menu-contato-pagamento_cinza":""},$scope.contactType=function(type){return"OWNER"==type?"Titular":"ADM"==type?"Administrativo":"TEC"==type?"TÃ©cnico":"COB"==type?"CobranÃ§a":""},$scope.isDomainAlert=function(domain){return"Expirado"==domain.Status||"Congelado"==domain.Status},$scope.isNewDomain=function(domain){return"Novo"==domain.Status},$scope.isRegularDomain=function(domain){return"Expirado"!=domain.Status&&"Congelado"!=domain.Status&&"Novo"!=domain.Status},$scope.getDomains=function(){var domainsURI="/cgi-bin/nicbr/user_domains";$http.get(domainsURI).success(function(data){$scope.hash=data.hash,$scope.domains=data.domains,$scope.loading=!1}).error(function(data){console&&console.error("Erro ao obter os dominios. Detalhes: "+data)})},$scope.getDomainsIfNotModified=function(){$http.get(domainsURI+"&hash-only=1").success(function(data){$scope.hash!=data.hash&&$scope.getDomains()}).error(function(data){console&&console.error("Erro ao obter os dominios. Detalhes: "+data)})},$scope.print=function(){$window.print()},$scope.getDomains()}function OrgsCtrl($scope,$http){$scope.currentPage=0,$scope.loading=!0,$scope.pageSize=10,$scope.orgs=[],$scope.orgCount=function(){var result=$scope.orgs.length;return $scope.filtered&&(result=$scope.orgs.length),result},$scope.setPage=function(n){$scope.currentPage=n-1},$scope.setPageSize=function(n){$scope.pageSize=n},$scope.getCurrentPage=function(){return $scope.currentPage+1},$scope.getOrgs=function(){var orgsURI="/cgi-bin/nicbr/titularidades";$http.get(orgsURI).success(function(data){$scope.orgs=data,$scope.loading=!1}).error(function(data){console&&console.error("Erro ao obter as entidades. Detalhes: "+data)})},$scope.getOrgs()}function MultiPaymentController($scope,$http){$scope.overdue="O prazo para o pagamento deste boleto expirou. Caso jÃ¡	tenha realizado o pagamento, aguarde compensaÃ§Ã£o bancÃ¡ria. Se ainda nÃ£o foi efetuado, cancele o boleto atual e realize o procedimento novamente, criando uma nova fatura.",$scope.isOverdue=function(deadline){var currentDate=new Date,parts=deadline.split("/");deadlineDate=new Date(parts[2],parts[1]-1,parts[0]),$scope.shows=currentDate>deadlineDate?"false":"true"},$scope.showInvoice={},$scope.multipayments=[],$scope.getMultiPayments=function(){var uri="/cgi-bin/nicbr/multipayments";$http.get(uri).success(function(data){$scope.multipayments=data;for(var i=0;i<$scope.multipayments.length;i++)$scope.showInvoice[$scope.invoice]=$scope.invoice==$scope.multipayments[i].invoiceId?!0:!1}).error(function(data){console&&console.error("Erro ao obter dados de pagamento. Detalhes: "+data)})},$scope.myToggle=function(id){void 0==$scope.showInvoice[id]&&($scope.showInvoice[id]=!1),$scope.showInvoice[id]=!$scope.showInvoice[id],myToggle("invoice"+id)},$scope.getMultiPayments()}function ProvidersCtrl($scope,$http,globalData){$scope.loading=!0,$scope.providers=[],$scope.getProviders=function(){var providersURI="/cgi-bin/nicbr/provedores";$http.get(providersURI).success(function(data){$scope.providers=data,$scope.loading=!1,globalData.providers=data}).error(function(data){console&&console.error("Erro ao obter os provedores. Detalhes: "+data)})},$scope.getProviders()}function ASesCtrl($scope,$http){$scope.loading=!0,$scope.ases=[];var asesURI="/cgi-bin/nicbr/numeracao";$scope.getASes=function(){$http.get(asesURI).success(function(data){$scope.ases=data,$scope.loading=!1}).error(function(data){console&&console.error("Erro ao obter os ASes. Detalhes: "+data)})},$scope.getASes()}function SPMController($scope,$sce){$scope.show_invoice=function(invoiceLink){$scope.invoice=$sce.trustAsResourceUrl(invoiceLink)}}function domainContactController($scope,$http,$location,shared){$scope.showContactsEditBox=!1,$scope.updated=!1,$scope.errors=[],$scope.save=function(contacts){var request={adm:contacts.adm,tec:contacts.tec,cob:contacts.bil};shared.properties.id>0?request.id=shared.properties.id:shared.properties.ticket>0&&(request.ticket=shared.properties.ticket),$http.post(updateDomainContactsURI,request,{transformRequest:transformPOST,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=iso-8859-1"}}).success(function(data){data.success?($scope.updated=!0,$scope.errors=[],$scope.readContacts.adm.handle=data.admHandle,$scope.readContacts.adm.name=data.admName,$scope.canAbdicateAdm=data.canAbdicateAdm,$scope.readContacts.tec.handle=data.tecHandle,$scope.readContacts.tec.name=data.tecName,$scope.canAbdicateTec=data.canAbdicateTec,$scope.readContacts.cob.handle=data.cobHandle,$scope.readContacts.cob.name=data.cobName,$scope.canAbdicateCob=data.canAbdicateCob):($scope.updated=!1,$scope.errors=data.errors)})}}function domainDNSController($scope,$http,shared){$scope.showDNSEditBox=!1,$scope.maxVisibleDNSServer=2,$scope.freeDNS=!1,$scope.updated=!1,$scope.errors=[],$scope.saveInitialStates=function(dns){$scope.freeDNS=!dns.manualDNS},$scope.checkMaxVisibleDNS=function(dns){$scope.maxVisibleDNSServer=dns.slave5.length>0?6:dns.slave4.length>0?5:dns.slave3.length>0?4:dns.slave2.length>0?3:2},$scope.checkVisibleDNSSEC=function(dns){return dns.keytag1.length>0||dns.keytag2.length>0?!0:!1},$scope.needsGlue=function(dns){return dns?$scope.needsGlueSpecific(dns.master)||$scope.needsGlueSpecific(dns.slave1)||$scope.needsGlueSpecific(dns.slave2)||$scope.needsGlueSpecific(dns.slave3)||$scope.needsGlueSpecific(dns.slave4)||$scope.needsGlueSpecific(dns.slave5):!1},$scope.needsGlueSpecific=function(ns){if(!ns)return!1;var fqdn=shared.properties.fqdn;return ns.length>=fqdn.length&&ns.substring(ns.length-fqdn.length,ns.length)==fqdn},$scope.save=function(dns,useFreeDNS){useFreeDNS&&(dns.manualDNS=!1,$scope.manualDNS=!1,$scope.dns.master="",$scope.dns.masterIP="",$scope.dns.masterIPv6="",$scope.dns.slave1="",$scope.dns.slave1IP="",$scope.dns.slave1IPv6="",$scope.dns.slave2="",$scope.dns.slave2IP="",$scope.dns.slave2IPv6="",$scope.dns.slave3="",$scope.dns.slave3IP="",$scope.dns.slave3IPv6="",$scope.dns.slave4="",$scope.dns.slave4IP="",$scope.dns.slave4IPv6="",$scope.dns.slave5="",$scope.dns.slave5IP="",$scope.dns.slave5IPv6="");var request={host1:dns.master,host2:dns.slave1,host3:dns.slave2,host4:dns.slave3,host5:dns.slave4,host6:dns.slave5,ip1:dns.masterIP,ip2:dns.slave1IP,ip3:dns.slave2IP,ip4:dns.slave3IP,ip5:dns.slave4IP,ip6:dns.slave5IP,ipv61:dns.masterIPv6,ipv62:dns.slave1IPv6,ipv63:dns.slave2IPv6,ipv64:dns.slave3IPv6,ipv65:dns.slave4IPv6,ipv66:dns.slave5IPv6,keytag1:dns.keytag1,keytag2:dns.keytag2,digest1:dns.digest1,digest2:dns.digest2,freeDNS:useFreeDNS};shared.properties.id>0?request.id=shared.properties.id:shared.properties.ticket>0&&(request.ticket=shared.properties.ticket);var url="/cgi-bin/nicbr/update_domain_dns";$http.post(url,request,{transformRequest:transformPOST,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=iso-8859-1"}}).success(function(data){data.success?(dns.manualDNS=$scope.dns.master.length>0||$scope.dns.slave1.length>0||$scope.dns.slave2.length>0||$scope.dns.slave3.length>0||$scope.dns.slave4.length>0||$scope.dns.slave5.length>0,$scope.updated=!0,$scope.errors=[],$scope.freeDNS=!dns.manualDNS,$scope.readDNS.master=$scope.dns.master,$scope.readDNS.masterIP=$scope.dns.masterIP,$scope.readDNS.masterIPv6=$scope.dns.masterIPv6,$scope.readDNS.slave1=$scope.dns.slave1,$scope.readDNS.slave1IP=$scope.dns.slave1IP,$scope.readDNS.slave1IPv6=$scope.dns.slave1IPv6,$scope.readDNS.slave2=$scope.dns.slave2,$scope.readDNS.slave2IP=$scope.dns.slave2IP,$scope.readDNS.slave2IPv6=$scope.dns.slave2IPv6,$scope.readDNS.slave3=$scope.dns.slave3,$scope.readDNS.slave3IP=$scope.dns.slave3IP,$scope.readDNS.slave3IPv6=$scope.dns.slave3IPv6,$scope.readDNS.slave4=$scope.dns.slave4,$scope.readDNS.slave4IP=$scope.dns.slave4IP,$scope.readDNS.slave4IPv6=$scope.dns.slave4IPv6,$scope.readDNS.slave5=$scope.dns.slave5,$scope.readDNS.slave5IP=$scope.dns.slave5IP,$scope.readDNS.slave5IPv6=$scope.dns.slave5IPv6,$scope.readDNS.keytag1=$scope.dns.keytag1,$scope.readDNS.digest1=$scope.dns.digest1,$scope.readDNS.keytag2=$scope.dns.keytag2,$scope.readDNS.digest2=$scope.dns.digest2):($scope.updated=!1,$scope.errors=data.errors)})}}function hideDetails(){var domainDetails=document.getElementById("domainDetails");if(void 0!==domainDetails){domainDetails.style.display="none";var detailsLink=document.getElementById("detailsLink");void 0!==detailsLink&&(detailsLink.style.display="inline")}}function showDetails(){var domainDetails=document.getElementById("domainDetails");if(void 0!==domainDetails){domainDetails.style.display="inline";var detailsLink=document.getElementById("detailsLink");void 0!==detailsLink&&(detailsLink.style.display="none")}}function statModalHeader(title){var divModalHeader=document.createElement("div");divModalHeader.setAttribute("class","modal-header");var buttonClose=document.createElement("button");buttonClose.setAttribute("type","button"),buttonClose.setAttribute("class","close"),buttonClose.setAttribute("data-dismiss","modal");var divClose=document.createElement("div");divClose.setAttribute("class","close"),buttonClose.appendChild(divClose),divModalHeader.appendChild(buttonClose);var spanTitle=document.createElement("span");spanTitle.setAttribute("class","modal-title");var titleText=document.createTextNode(title);return spanTitle.appendChild(titleText),divModalHeader.appendChild(spanTitle),divModalHeader}function statModalBody(tld,name){var divModalBody=document.createElement("div");divModalBody.setAttribute("class","modal-body");var divPeriods=document.createElement("div");divPeriods.setAttribute("id","graph-button-"+name),divPeriods.setAttribute("class","col-lg-12 col-md-12 col-sm-12");var divGraphs=document.createElement("div");divGraphs.setAttribute("class","col-lg-12 col-md-12 col-sm-12"),divGraphs.setAttribute("style","position: static;");for(var i=0;3>i;i++){var divButton=document.createElement("div");divButton.setAttribute("class","col-lg-4 col-md-4 col-sm-4");var btn=document.createElement("button");btn.setAttribute("onclick","changeGraph('"+graphTypes[i]+"', '"+name+"')"),btn.setAttribute("class","btn btn-success btn-graph-stats");var btnText=document.createTextNode(buttonLabels[i]);btn.appendChild(btnText),divButton.appendChild(btn),divPeriods.appendChild(divButton);var img=document.createElement("img");img.setAttribute("id",graphTypes[i]+"-"+name),img.setAttribute("src","/stat/"+tld+imgNames[i]+".png");var display="inline";display=0==i?"inline":"none",img.setAttribute("style","display: "+display),img.setAttribute("class","img-responsive"),divGraphs.appendChild(img)}return divModalBody.appendChild(divPeriods),divModalBody.appendChild(divGraphs),divModalBody}function getGraphTitle(tld){var title=tld;for(var t in graphTitles)t==tld&&(title=graphTitles[t]);return title}function statModal(tld){var name=tld.replace(".","","g");if(null!=document.getElementById("graph-"+name)&&"all"!=name){if(null==document.getElementById("graph-button-"+name)){var divModal=document.getElementById("graph-"+name),divModalDialog=document.createElement("div"),divModalContent=document.createElement("div"),divModalHeader=statModalHeader(getGraphTitle(tld)),divModalBody=statModalBody(tld,name);divModalDialog.setAttribute("class","modal-dialog"),divModalContent.setAttribute("class","modal-content"),divModalContent.appendChild(divModalHeader),divModalContent.appendChild(divModalBody),divModalDialog.appendChild(divModalContent),divModal.appendChild(divModalDialog)}$("#graph-"+name).modal({keyboard:!0})}}function changeGraph(type,tld){for(var i=0;3>i;i++){var el=document.getElementById(graphTypes[i]+"-"+tld);el.style.display=type==graphTypes[i]?"inline":"none"}}function exibirCampoResponsaveis(){var camposExibidos=2;""!=$("#nome3").val()&&(camposExibidos++,$("#informacoesEntidade3").css("display","block")),camposExibidos>=3&&$("#acrescentarResponsavel").hide(),$("#acrescentarResponsavel").click(function(){camposExibidos>=3||(camposExibidos++,$("#informacoesEntidade"+camposExibidos).slideDown("normal"),camposExibidos>=3&&$(this).fadeOut())})}function verify_max_records(){var table=document.getElementById("zone_table");if(void 0===table||null===table)return disable_add_record(),!1;var rowCount=table.rows.length-2;0>rowCount&&(rowCount=0);var empty_rr=document.getElementById("empty-rr");void 0!==empty_rr&&null!==empty_rr&&(empty_rr.style.display=rowCount>0?"none":"table-row");var title_rr=document.getElementById("title-rr");void 0!==title_rr&&null!==title_rr&&(title_rr.style.display=rowCount>0?"table-row":"none");var basic_mode=document.getElementById("basic_mode");void 0!==basic_mode&&null!==basic_mode&&(basic_mode.style.display=rowCount>0?"none":"inline");var max_records=document.getElementById("max_records");if(void 0===max_records||null===max_records)return disable_add_record(),!1;""===max_records.value&&(max_records.value=0);var max=parseInt(max_records.value,10);return rowCount>=max?(disable_add_record(),!1):(enable_add_record(),!0)}function remove_record(id,ownername,type,rdata){var form=document.getElementById("zone_form");if(void 0!==form&&null!==form){var rr_ownername=document.createElement("input");rr_ownername.setAttribute("name","rr_del_ownername_"+id),rr_ownername.setAttribute("value",ownername),rr_ownername.setAttribute("type","hidden");var rr_type=document.createElement("input");rr_type.setAttribute("name","rr_del_type_"+id),rr_type.setAttribute("value",type),rr_type.setAttribute("type","hidden");var rr_rdata=document.createElement("input");rr_rdata.setAttribute("name","rr_del_rdata_"+id),rr_rdata.setAttribute("value",rdata),rr_rdata.setAttribute("type","hidden"),form.appendChild(rr_ownername),form.appendChild(rr_type),form.appendChild(rr_rdata),verify_max_records()}}function add_record(zonename){var table=document.getElementById("zone_table");if(void 0===table||null===table)return 0;if(!verify_max_records())return 0;var rowCount=table.rows.length,row=table.insertRow(rowCount);rowCount+=1;var link_remove=document.createElement("a");link_remove.setAttribute("class","remove_rr"),link_remove.setAttribute("id","rr"+rowCount),link_remove.setAttribute("onclick","remove_row(this.parentNode.parentNode.rowIndex); verify_max_records();");var icon=document.createElement("i");icon.setAttribute("class","glyphicon glyphicon-remove"),link_remove.appendChild(icon);var div_name=document.createElement("div");div_name.setAttribute("style",""),div_name.setAttribute("valign","top");var ownername=document.createElement("input"),id_ownername="ownername_"+rowCount;if(ownername.setAttribute("name","rr_add_ownername_"+rowCount),ownername.setAttribute("id",id_ownername),ownername.setAttribute("type","text"),ownername.setAttribute("class","form-control input-sm ownername"),ownername.setAttribute("onchange","formatOwnername('"+id_ownername+"')"),ownername.setAttribute("onblur","formatOwnername('"+id_ownername+"')"),ownername.setAttribute("onmaouseup","formatOwnername('"+id_ownername+"')"),ownername.setAttribute("onkeyup","formatOwnername('"+id_ownername+"')"),ownername.setAttribute("onkeydown","formatOwnername('"+id_ownername+"')"),div_name.appendChild(ownername),void 0!==zonename&&null!==zonename){var span=document.createElement("span"),text=document.createTextNode(" ."+zonename);div_name.appendChild(span),span.appendChild(text)}var se=document.createElement("select");se.setAttribute("name","rr_add_type_"+rowCount),se.setAttribute("id","type_"+rowCount),se.setAttribute("class","form-control input-sm rrtype"),se.setAttribute("onchange","change_rdata("+rowCount+")"),se.options[0]=new Option("A","A"),se.options[1]=new Option("AAAA","AAAA"),se.options[2]=new Option("CNAME","CNAME"),se.options[3]=new Option("MX","MX"),se.options[4]=new Option("TXT","TXT"),se.options[5]=new Option("TLSA","TLSA");var rdata_A=document.createElement("input"),id_a="A_"+rowCount;rdata_A.setAttribute("name","rr_add_rdata_1_"+rowCount),rdata_A.setAttribute("id",id_a),rdata_A.setAttribute("class","form-control input-sm rdata_a"),rdata_A.setAttribute("placeholder","EndereÃ§o IP"),rdata_A.setAttribute("maxlength","15"),rdata_A.setAttribute("type","text"),rdata_A.setAttribute("style","display: inline"),rdata_A.setAttribute("onchange","formatIPv4('"+id_a+"')"),rdata_A.setAttribute("onblur","formatIPv4('"+id_a+"')"),rdata_A.setAttribute("onmaouseup","formatIPv4('"+id_a+"')"),rdata_A.setAttribute("onkeyup","formatIPv4('"+id_a+"')"),rdata_A.setAttribute("onkeydown","formatIPv4('"+id_a+"')");var rdata_AAAA=document.createElement("input"),id_aaaa="AAAA_"+rowCount;rdata_AAAA.setAttribute("name","rr_add_rdata_1_"+rowCount),rdata_AAAA.setAttribute("id",id_aaaa),rdata_AAAA.setAttribute("class","form-control input-sm rdata_aaaa"),rdata_AAAA.setAttribute("placeholder","EndereÃ§o IPv6"),rdata_AAAA.setAttribute("maxlength","39"),rdata_AAAA.setAttribute("type","text"),rdata_AAAA.setAttribute("onchange","formatIPv6('"+id_aaaa+"')"),rdata_AAAA.setAttribute("onblur","formatIPv6('"+id_aaaa+"')"),rdata_AAAA.setAttribute("onmaouseup","formatIPv6('"+id_aaaa+"')"),rdata_AAAA.setAttribute("onkeyup","formatIPv6('"+id_aaaa+"')"),rdata_AAAA.setAttribute("onkeydown","formatIPv6('"+id_aaaa+"')");var rdata_CNAME=document.createElement("input"),id_cname="CNAME_"+rowCount;rdata_CNAME.setAttribute("name","rr_add_rdata_1_"+rowCount),rdata_CNAME.setAttribute("id",id_cname),rdata_CNAME.setAttribute("class","form-control input-sm rdata_cname"),rdata_CNAME.setAttribute("placeholder","Nome do servidor"),rdata_CNAME.setAttribute("maxlength","255"),rdata_CNAME.setAttribute("type","text"),rdata_CNAME.setAttribute("onchange","formatName('"+id_cname+"')"),rdata_CNAME.setAttribute("onblur","formatName('"+id_cname+"')"),rdata_CNAME.setAttribute("onmaouseup","formatName('"+id_cname+"')"),rdata_CNAME.setAttribute("onkeyup","formatName('"+id_cname+"')"),rdata_CNAME.setAttribute("onkeydown","formatName('"+id_cname+"')");var rdata_MX_1=document.createElement("input"),id_mx_1="MX_pref_"+rowCount;rdata_MX_1.setAttribute("name","rr_add_rdata_1_"+rowCount),rdata_MX_1.setAttribute("id",id_mx_1),rdata_MX_1.setAttribute("class","form-control input-sm rdata_mx_preference"),rdata_MX_1.setAttribute("maxlength","3"),rdata_MX_1.setAttribute("type","text"),rdata_MX_1.setAttribute("onchange","formatMXPref('"+id_mx_1+"')"),rdata_MX_1.setAttribute("onblur","formatMXPref('"+id_mx_1+"')"),rdata_MX_1.setAttribute("onmaouseup","formatMXPref('"+id_mx_1+"')"),rdata_MX_1.setAttribute("onkeyup","formatMXPref('"+id_mx_1+"')"),rdata_MX_1.setAttribute("onkeydown","formatMXPref('"+id_mx_1+"')");var rdata_MX_2=document.createElement("input"),id_mx_2="MX_exch_"+rowCount;rdata_MX_2.setAttribute("name","rr_add_rdata_2_"+rowCount),rdata_MX_2.setAttribute("id",id_mx_2),rdata_MX_2.setAttribute("class","form-control input-sm rdata_mx_exchange"),rdata_MX_2.setAttribute("placeholder","Servidor de email"),rdata_MX_2.setAttribute("maxlength","255"),rdata_MX_2.setAttribute("type","text"),rdata_MX_2.setAttribute("onchange","formatName('"+id_mx_2+"')"),rdata_MX_2.setAttribute("onblur","formatName('"+id_mx_2+"')"),rdata_MX_2.setAttribute("onmaouseup","formatName('"+id_mx_2+"')"),rdata_MX_2.setAttribute("onkeyup","formatName('"+id_mx_2+"')"),rdata_MX_2.setAttribute("onkeydown","formatName('"+id_mx_2+"')");var rdata_TXT=document.createElement("input"),id_txt="TXT_"+rowCount;rdata_TXT.setAttribute("name","rr_add_rdata_1_"+rowCount),rdata_TXT.setAttribute("id",id_txt),rdata_TXT.setAttribute("class","form-control input-sm rdata_txt"),rdata_TXT.setAttribute("maxlength","255"),rdata_TXT.setAttribute("type","text"),rdata_TXT.setAttribute("onchange","formatTxt('"+id_txt+"')"),rdata_TXT.setAttribute("onblur","formatTxt('"+id_txt+"')"),rdata_TXT.setAttribute("onmaouseup","formatTxt('"+id_txt+"')"),rdata_TXT.setAttribute("onkeyup","formatTxt('"+id_txt+"')"),rdata_TXT.setAttribute("onkeydown","formatTxt('"+id_txt+"')");var rdata_tlsa_usage=document.createElement("select"),id_tlsa_usage="tlsa_usage_"+rowCount;rdata_tlsa_usage.setAttribute("name","rr_add_rdata_1_"+rowCount),rdata_tlsa_usage.setAttribute("id",id_tlsa_usage),rdata_tlsa_usage.setAttribute("class","form-control input-sm rdata_tlsa_usage");for(var tlsa_usages=["CA","Service","Trust Anchor","Domain"],i=0;4>i;i++){var option=document.createElement("option");option.setAttribute("value",i.toString()),option.innerHTML=i.toString()+" - "+tlsa_usages[i],rdata_tlsa_usage.appendChild(option)}var rdata_tlsa_selector=document.createElement("select"),id_tlsa_selector="tlsa_selector_"+rowCount;rdata_tlsa_selector.setAttribute("name","rr_add_rdata_2_"+rowCount),rdata_tlsa_selector.setAttribute("id",id_tlsa_selector),rdata_tlsa_selector.setAttribute("class","form-control input-sm rdata_tlsa_selector");var tlsa_selector_option=document.createElement("option");tlsa_selector_option.setAttribute("value","1"),tlsa_selector_option.innerHTML="1 - Subject Public Key",rdata_tlsa_selector.appendChild(tlsa_selector_option);var rdata_tlsa_mtype=document.createElement("select"),id_tlsa_mtype="tlsa_mtype_"+rowCount;rdata_tlsa_mtype.setAttribute("name","rr_add_rdata_3_"+rowCount),rdata_tlsa_mtype.setAttribute("id",id_tlsa_mtype),rdata_tlsa_mtype.setAttribute("class","form-control input-sm rdata_tlsa_mtype");var tlsa_mtypes=new Array;tlsa_mtypes[1]="SHA-256",tlsa_mtypes[2]="SHA-512";for(var i=1;2>=i;i++){var option=document.createElement("option");option.setAttribute("value",i.toString()),option.innerHTML=i.toString()+" - "+tlsa_mtypes[i],rdata_tlsa_mtype.appendChild(option)}var rdata_tlsa_data=document.createElement("input"),id_tlsa_data="tlsa_data_"+rowCount;rdata_tlsa_data.setAttribute("name","rr_add_rdata_4_"+rowCount),rdata_tlsa_data.setAttribute("id",id_tlsa_data),rdata_tlsa_data.setAttribute("class","form-control input-sm rdata_tlsa_data"),rdata_tlsa_data.setAttribute("maxlength","255"),rdata_tlsa_data.setAttribute("type","text");var cell1=row.insertCell(0);cell1.appendChild(link_remove);var cell2=row.insertCell(1);cell2.setAttribute("class","ownername"),cell2.appendChild(div_name);var cell3=row.insertCell(2);cell3.setAttribute("class","rrtype"),cell3.appendChild(se);var cell4=row.insertCell(3);return cell4.setAttribute("class","rdata"),cell4.appendChild(rdata_A),cell4.appendChild(rdata_AAAA),cell4.appendChild(rdata_CNAME),cell4.appendChild(rdata_MX_1),cell4.appendChild(rdata_MX_2),cell4.appendChild(rdata_TXT),cell4.appendChild(rdata_tlsa_usage),cell4.appendChild(rdata_tlsa_selector),cell4.appendChild(rdata_tlsa_mtype),cell4.appendChild(rdata_tlsa_data),verify_max_records(),rowCount}function enable_add_record(){var add_record=document.getElementById("addRecord");void 0!==add_record&&null!==add_record&&(add_record.disable=!1,add_record.style.display="inline")}function disable_add_record(){var add_record=document.getElementById("addRecord");void 0!==add_record&&null!==add_record&&(add_record.disable=!0,add_record.style.display="none")}function change_rdata(row_count){if(void 0!==row_count&&null!==row_count){var select=document.getElementById("type_"+row_count);if(void 0!==select&&null!==select){var index=select.selectedIndex;if(void 0!==index&&null!==index){change_display("A",row_count,!1),change_display("AAAA",row_count,!1),change_display("CNAME",row_count,!1),change_display("MX",row_count,!1),change_display("TXT",row_count,!1),change_display("TLSA",row_count,!1);var value=select.options[index].value;change_display(value,row_count,!0)}}}}function formatOwnername(id){var input=document.getElementById(id);if(void 0!==input&&null!==input){var value=input.value;if(value.length>0){var match=value.match(/[Ã€Ã�Ã‚ÃƒÃ‡Ã‰ÃŠÃ�Ã“Ã”Ã•ÃšÃœÃ Ã¡Ã¢Ã£Ã§Ã©ÃªÃ­Ã³Ã´ÃµÃºÃ¼\da-z\.\-\_]*/gi);if(match!=value){value="";for(var i=0;i<match.length;i++)value+=match[i]}}value!=input.value&&(input.value=value)}}function remove_row(row_count){document.getElementById("zone_table").deleteRow(row_count)}function change_display(type,row_count,enable){if(void 0!==type&&null!==type&&void 0!==row_count&&null!==row_count){var display="none";enable===!0&&(display="inline");var e;if("A"===type)e=document.getElementById("A_"+row_count),void 0!==e&&null!==e&&(e.style.display=display,enable===!1&&(e.value=""));else if("AAAA"===type)e=document.getElementById("AAAA_"+row_count),void 0!==e&&null!==e&&(e.style.display=display,enable===!1&&(e.value=""));else if("CNAME"===type)e=document.getElementById("CNAME_"+row_count),void 0!==e&&null!==e&&(e.style.display=display,enable===!1&&(e.value=""));else if("MX"===type){var e1=document.getElementById("MX_pref_"+row_count),e2=document.getElementById("MX_exch_"+row_count);void 0!==e1&&null!==e1&&(e1.style.display=display,enable===!1&&(e1.value="")),void 0!==e2&&null!==e2&&(e2.style.display=display,enable===!1&&(e2.value=""))}else if("TXT"===type)e=document.getElementById("TXT_"+row_count),void 0!==e&&null!==e&&(e.style.display=display,enable===!1&&(e.value=""));else{if("TLSA"!==type)return;e=document.getElementById("tlsa_usage_"+row_count),void 0!==e&&null!==e&&(e.style.display=display,enable===!1&&(e.value="")),e=document.getElementById("tlsa_selector_"+row_count),void 0!==e&&null!==e&&(e.style.display=display,enable===!1&&(e.value="")),e=document.getElementById("tlsa_mtype_"+row_count),void 0!==e&&null!==e&&(e.style.display=display,enable===!1&&(e.value="")),e=document.getElementById("tlsa_data_"+row_count),void 0!==e&&null!==e&&(e.style.display=display,enable===!1&&(e.value=""))}}}function formatName(id){var input=document.getElementById(id);if(void 0!==input&&null!==input){var value=input.value;if(value.length>0){var match=value.match(/[\dA-Za-z\.\-]*/gi);
if(match!=value){value="";for(var i=0;i<match.length;i++)value+=match[i]}}value!=input.value&&(input.value=value)}}function formatIPv4(id){var input=document.getElementById(id);if(void 0!==input&&null!==input){var value=input.value;if(value.length>0){var match=value.match(/[\d\.]*/gi);if(match!=value){value="";for(var i=0;i<match.length;i++)value+=match[i]}}value!=input.value&&(input.value=value)}}function formatIPv6(id){var input=document.getElementById(id);if(void 0!==input&&null!==input){var value=input.value;if(value.length>0){var match=value.match(/[\dA-Fa-f:]*/gi);if(match!=value){value="";for(var i=0;i<match.length;i++)value+=match[i]}}value!=input.value&&(input.value=value)}}function formatMXPref(id){var input=document.getElementById(id);if(void 0!==input&&null!==input){var value=input.value;if(value.length>0){var match=value.match(/[\d]*/gi);if(match!=value){value="";for(var i=0;i<match.length;i++)value+=match[i]}}value!=input.value&&(input.value=value)}}function formatTxt(id){var input=document.getElementById(id);if(void 0!==input&&null!==input){var value=input.value;if(value.length>0){var match=value.match(/[\d A-Za-z\-\_\.:/&\?@=~]*/gi);if(match!=value){value="";for(var i=0;i<match.length;i++)value+=match[i]}}value!=input.value&&(input.value=value)}}function fetchTLSA(zonename,ownername){$("#error_msg").empty();var hostname=ownername;""!==ownername&&(hostname+="."),hostname+=zonename;var ajaxRequest={url:"/cgi-bin/nicbr/daneboy?usage=1&mtype=1&selector=1&host="+hostname,success:function(data){if(void 0===data||""===data){var msg='Nenhum certificado encontrado para "'+hostname+'"';return void $("#error_msg").append("<tr><td class='errorMsg'>"+msg+"</td></tr>")}var tlsaParts=data.split(" "),usage=tlsaParts[3],cert=tlsaParts[6],index=add_record(zonename);$("#ownername_"+index).val("_443._tcp."+ownername),$("#type_"+index).val("TLSA"),change_rdata(index),$("#tlsa_usage_"+index).val(usage),$("#tlsa_selector_"+index).val("1"),$("#tlsa_mtype_"+index).val("1"),$("#tlsa_data_"+index).val(cert)}};$.ajax(ajaxRequest)}function PaymentController($scope,$http,$window){$scope.hash="",$scope.domains=[],$scope.loading=!0,$scope.firstYearValue=0,$scope.nextYearsValue=0,$scope.getDomains=function(){var domainsURI="/cgi-bin/nicbr/user_domains";$http.get(domainsURI).success(function(data){$scope.hash=data.hash,$scope.domains=data.domains,$scope.loading=!1}).error(function(data){console&&console.error("Erro ao obter os dominios. Detalhes: "+data)})},$scope.NumOfSelectedDomains=1,$scope.selectedAll=!1,$scope.selectAll=function(){$scope.selectedAll=!$scope.selectedAll,$scope.NumOfSelectedDomains=$scope.selectedAll?$scope.numDomains("domainTable","input"):1,$scope.addOrRemoveOption()},$scope.countCheckedboxes=function(){$scope.NumOfSelectedDomains=0;for(var elements=$window.document.getElementById("domainTable").getElementsByTagName("input"),i=0;i<elements.length;i++)"checkbox"==elements[i].type&&elements[i].checked&&$scope.NumOfSelectedDomains++},$scope.numDomains=function(id,name){return $window.document.getElementById(id).getElementsByTagName(name).length},$scope.addOrRemoveOption=function(){$scope.NumOfSelectedDomains>1?(-1==$scope.selectedOption&&($scope.selectedOption=1),$("#periodosSelecionados option[value='-1']").remove()):$("#periodosSelecionados").prepend('<option value="-1">NÃ£o renovar</option>')},$scope.update=function(){$scope.countCheckedboxes(),$scope.addOrRemoveOption()},$scope.selectedOption=1,$scope.calculateAmount=function(){return $scope.selectedOption<1?0:($scope.firstYearValue=30*$scope.NumOfSelectedDomains,$scope.nextYearsValue=$scope.NumOfSelectedDomains*($scope.selectedOption-1)*27,$scope.firstYearValue+$scope.nextYearsValue)},$scope.period=function(option){return option>1?option+" anos":option+" ano"}}function gerarMascara(){$("#input_entidade").val("").mask("99.999.999/9999-99"),$("#input_entidade").val("").mask($("#cpf").is(":checked")?"999.999.999-99":"99.999.999/9999-99"),$("#cpf").click(function(){$("#input_entidade").val("").mask("999.999.999-99")}),$("#cnpj").click(function(){$("#input_entidade").val("").mask("99.999.999/9999-99")})}function exibirCampoResponsaveis(){var camposExibidos=2;""!=$("#nome3").val()&&(camposExibidos++,$("#informacoesEntidade3").css("display","block")),camposExibidos>=3&&$("#acrescentarResponsavel").hide(),$("#acrescentarResponsavel").click(function(){camposExibidos>=3||(camposExibidos++,$("#informacoesEntidade"+camposExibidos).slideDown("normal"),camposExibidos>=3&&$(this).fadeOut())})}function buscarUsuario(){if(""==$.trim($("#id").val()))return!0;$("body").fadeTo(.5,.3);var options={url:"/cgi-bin/nicbr/busca_usuario",dataType:"text",contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",data:{handle:$("#id").val()},success:function(data){""==$.trim(data)?($("#label_id").text("UsuÃ¡rio nÃ£o encontrado."),$("#label_id").css("color","red")):($("#label_id").text(data),$("#label_id").css("color","black"))},error:function(jqXHR,textStatus,errorThrown){var msg="Ao tentar buscar o usuÃ¡rio '"+$("#id").val()+"', o seguinte erro ocorreu: "+errorThrown+". Tente novamente mais tarde por favor, caso o erro persista entre em contato com o suporte.";alert(msg)}};$.ajax(options),$("cnpj").focus(),$("body").fadeTo(.5,1)}var searchDomainModule=angular.module("search-domain",[]);searchDomainModule.directive("searchdomain",function(){return{restrict:"E",scope:{},templateUrl:"/scripts/aux/search_domain.html",controller:["$scope","$http","$sce",function($scope,$http,$sce){$scope.showResult=!1,$scope.domainUnavailable=!1,$scope.domainAvailable=!1,$scope.nomBr=!1,$scope.prices='<div class="tooltip-outros-valores"><ul><li>1 Ano <span class="preco">R$ 30,00</span></li><li>2 Anos <span class="preco">R$ 57,00</span></li><li>3 Anos <span class="preco">R$ 84,00</span></li><li>4 Anos <span class="preco">R$ 111,00</span></li><li>5 Anos <span class="preco">R$ 138,00</span></li><li>6 Anos <span class="preco">R$ 165,00</span></li><li>7 Anos <span class="preco">R$ 192,00</span></li><li>8 Anos <span class="preco">R$ 219,00</span></li><li>9 Anos <span class="preco">R$ 246,00</span></li><li>10 Anos <span class="preco">R$ 273,00</span></li></ul></div>',$scope.nombrPrices='<div class="tooltip-outros-valores"><ul><li>3 Anos <span class="preco">R$ 30,00</span></li><li>4 Anos <span class="preco">R$ 39,00</span></li><li>5 Anos <span class="preco">R$ 48,00</span></li><li>6 Anos <span class="preco">R$ 57,00</span></li><li>7 Anos <span class="preco">R$ 66,00</span></li><li>8 Anos <span class="preco">R$ 75,00</span></li><li>9 Anos <span class="preco">R$ 84,00</span></li><li>10 Anos <span class="preco">R$ 93,00</span></li></ul></div>',$scope.checkAvail=function(){$scope.comment="";var query=$scope.search_domain.fqdn;query&&(query=query.trim(),query=escape(query),$scope.nomBr=".nom.br"==query.substr(query.length-7),$http.get("/cgi-bin/avail/?qr="+query).success(function(data){$scope.showResult=!0,$scope.search_domain.fqdn=data.fqdn,$scope.freeDomain=data.free,$scope.tickets=[],1==data.available?($scope.showButton=!0,$scope.domainAvailable=!0,data.comment&&($scope.comment=$sce.trustAsHtml(data.comment)),data.empbr&&($scope.showButton=!1),data.tickets&&($scope.tickets=data.tickets)):($scope.showButton=!1,$scope.domainUnavailable=!0,$scope.domain=data.domain,$scope.suggestions=data.suggestions,data.tickets&&($scope.showButton=!0,$scope.tickets=data.tickets),data.reason&&($scope.reason=$sce.trustAsHtml(data.reason)))}))},$scope.hideResult=function(){$scope.showResult=!1,$scope.domainAvailable=!1,$scope.domainUnavailable=!1}}]}}),angular.module("contacts",[]).directive("contacts",function(){"use strict";return{restrict:"E",scope:{newDomain:"=?",contacts:"=",canChangeAdm:"=?",admSearchParams:"=",tecSearchParams:"=",bilSearchParams:"="},templateUrl:"/scripts/aux/contacts.html",controller:["$scope","$window",function($scope,$window){void 0===$scope.contacts&&($scope.contacts={adm:"",tec:"",bil:""}),void 0===$scope.canChangeAdm&&($scope.canChangeAdm=!1),void 0===$scope.newDomain&&($scope.newDomain=!1),$scope.redirect=function(path){$window.location=path}}]}});var dnsModule=angular.module("dns",[]);dnsModule.directive("dns",function(){return{restrict:"E",scope:{fqdn:"=",dns:"=",canLeaveFreeDns:"=?"},templateUrl:"/scripts/aux/dns.html",controller:["$scope","$window",function($scope,$window){$scope.maxVisibleDNSServer=2,$scope.dnssecVisible=!1,void 0===$scope.dns&&($scope.dns={master:"",masterIP:"",masterIPv6:"",slave1:"",slave1IP:"",slave1IPv6:"",slave2:"",slave2IP:"",slave2IPv6:"",slave3:"",slave3IP:"",slave3IPv6:"",slave4:"",slave4IP:"",slave4IPv6:"",slave5:"",slave5IP:"",slave5IPv6:"",keytag1:"",digest1:"",keytag2:"",digest2:"",manualDNS:!1}),$scope.dnsFields=!1,(""!=$scope.dns.master||$scope.dns.manualDNS)&&($scope.dnsFields=!0),void 0===$scope.canLeaveFreeDns&&($scope.canLeaveFreeDns=!0),$scope.showDNSFields=function(){$scope.dnsFields=!0},$scope.redirect=function(path){$window.location=path},$scope.checkMaxVisibleDNS=function(){$scope.maxVisibleDNSServer=$scope.dns.slave5.length>0?6:$scope.dns.slave4.length>0?5:$scope.dns.slave3.length>0?4:$scope.dns.slave2.length>0?3:2},$scope.checkVisibleDNSSEC=function(){$scope.dnssecVisible=$scope.dns.keytag1.length>0||$scope.dns.keytag2.length>0},$scope.needsGlue=function(){return $scope.needsGlueSpecific($scope.dns.master)||$scope.needsGlueSpecific($scope.dns.slave1)||$scope.needsGlueSpecific($scope.dns.slave2)||$scope.needsGlueSpecific($scope.dns.slave3)||$scope.needsGlueSpecific($scope.dns.slave4)||$scope.needsGlueSpecific($scope.dns.slave5)},$scope.needsGlueSpecific=function(ns){if(!ns||!$scope.fqdn)return!1;if(ns.length<$scope.fqdn.length)return!1;var lowns="."+ns.toLowerCase(),lowfqdn="."+$scope.fqdn.toLowerCase();return lowns.substring(lowns.length-lowfqdn.length,lowns.length)===lowfqdn},$scope.increaseDNS=function(){$scope.maxVisibleDNSServer<6&&($scope.maxVisibleDNSServer+=1)},$scope.makeDNSSECVisible=function(){$scope.dnssecVisible=!0}}]}});var loginModule=angular.module("login",["ngCookies"]);loginModule.directive("login",function(){return{restrict:"E",scope:{userId:"@",fqdn:"@",doc:"@"},templateUrl:"/scripts/aux/login.html",controller:["$scope","$http","$window","$cookies","shared",function($scope,$http,$window,$cookies,shared){$scope.hasCookie=!0,document.cookie="brcookie=1;Path=/",-1==document.cookie.indexOf("brcookie")&&($scope.hasCookie=!1),$scope.user={},$scope.user.id=$scope.userId,!$scope.user.id&&$cookies.aihandle&&($scope.user.id=$cookies.aihandle),$scope.user.msg="",$scope.otp=!1,$scope.login=function(){$scope.user.msg="";var url="/cgi-bin/nicbr/loginajax",data="user="+document.getElementById("user").value+"&password="+encodeURIComponent(document.getElementById("password").value);$scope.user.token&&(url="/cgi-bin/nicbr/token",data="otp="+$scope.user.token),$http.post(url,data).success(function(data){data.focus&&($("#"+data.focus).val(""),$("#"+data.focus).focus()),data.success?(data.stkey&&(document.cookie="stkey="+data.stkey+"; Path=/; Secure",document.cookie="aihandle="+data.user+"; Path=/;Max-Age=31536000"),data.otp?$scope.otp=!0:(shared.properties.logged=!0,$window.location=$scope.fqdn&&$scope.doc?"/cgi-bin/nicbr/novo_dominio?fqdn="+$scope.fqdn+"&edoc="+$scope.doc:"/cgi-bin/nicbr/painel")):($scope.user.msg=data.msg,document.cookie="lghandle=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",shared.properties.logged=!1)})},$scope.reminder=function(){document.getElementById("user").value.length<3?document.getElementById("user").focus():document.location="/cgi-bin/nicbr/lembrete?handle="+document.getElementById("user").value}}]}}),loginModule.directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}});var loginInfoModule=angular.module("login-info",["ngCookies"]);loginInfoModule.directive("logininfo",function(){return{restrict:"E",scope:{ishomepage:"@",menuvisible:"@"},controller:["$scope","$cookies","shared",function($scope,$cookies,shared){if($scope.handle="",$scope.name="",void 0==shared.properties.logged&&(shared.properties.logged=!1),$scope.ishomepage||($scope.ishomepage=!1),$cookies.lghandle){var handleParts=$cookies.lghandle.split("||");$scope.handle=handleParts[0],$scope.name=handleParts[1],$scope.expire=handleParts[2];var now=new Date,expire=new Date(1e3*parseInt($scope.expire));now>expire?(document.cookie="lghandle=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",shared.properties.logged=!1):shared.properties.logged=""!=$scope.handle}$scope.logout=function(){document.cookie="lghandle=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",shared.properties.logged=!1},$scope.isLogged=function(){return void 0==shared.properties.logged&&(shared.properties.logged=!1),shared.properties.logged}}]}});var loggedMenuModule=angular.module("logged-menu",[]);loggedMenuModule.directive("loggedmenu",function(){return{restrict:"E",scope:{activeTab:"@",program:"@"},templateUrl:"/scripts/aux/logged_menu.html",controller:["$scope","$http","$location","$window","shared",function($scope,$http,$location,$window,shared){$scope.numberOfDomains=0,$scope.numberOfOrgs=0,$scope.providers=[],$scope.numberOfIPs=0,$scope.numberOfAS=0,$scope.multipay=0,shared.properties.activeTab=$scope.activeTab;var arg=$location.absUrl().match(/.*exibir=([a-z]+).*/);if(arg){var exibir=arg[1];exibir&&(shared.properties.activeTab=exibir)}$scope.getActiveTab=function(){return shared.properties.activeTab},$scope.setTab=function(tab){if("painel"==$scope.program)shared.properties.activeTab=tab;else{var url="/cgi-bin/nicbr/painel?exibir="+tab;$window.location.href=url}},$scope.redirectSingleProvider=function(){if(1==$scope.providers.length){var providerURI="/cgi-bin/nicbr/provmng";$window.location.href=providerURI+"?id="+$scope.providers[0]}},$scope.getResources=function(){$http.get("/cgi-bin/nicbr/recursos").success(function(data){$scope.numberOfDomains=data.domains,$scope.numberOfOrgs=data.orgs,$scope.providers=data.providers,$scope.numberOfIPs=data.ips,$scope.numberOfAS=data.as,$scope.multipay=data.multipay}).error(function(data){console.error("Erro ao obter os contadores. Detalhes: "+data)})},$scope.getResources()}]}}),$(function(){showSectionFromQueryString(),printOnLoad()});var dependencies=["ngSanitize","ui.bootstrap","contacts","dns","login","login-info","logged-menu","search-domain","faq","subfaq"],myApp=angular.module("myApp",dependencies);myApp.service("shared",function(){return{properties:{}}});var faqModule=angular.module("faq",[]);faqModule.directive("faq",function(){return{restrict:"E",scope:{id:"@",faq:"=",question:"@"},transclude:!0,templateUrl:"/scripts/aux/faq.html",controller:["$scope",function($scope){$scope.myToggle=function(){$scope.faq[$scope.id]=!$scope.faq[$scope.id];var contentId=$scope.id+"-content";myToggle(contentId)}}]}});var subFAQModule=angular.module("subfaq",[]);subFAQModule.directive("subfaq",function(){return{restrict:"E",scope:{id:"@",faq:"=",question:"@"},transclude:!0,templateUrl:"/scripts/aux/subfaq.html",controller:["$scope",function($scope){$scope.myToggle=function(){$scope.faq[$scope.id]=!$scope.faq[$scope.id];var contentId=$scope.id+"-content";myToggle(contentId)}}]}}),myApp.controller("GeneralFAQController",["$scope","$location","$timeout",function($scope,$location,$timeout){$scope.faq={};var id=getParameterByName("item");void 0!=id&&id.length>0&&$timeout(function(){var content=$("#"+id+"-content");if(content){$scope.faq[id]=!0,content.slideDown({duration:200,easing:"swing"});var element_to_scroll_to=document.getElementById(id);element_to_scroll_to.scrollIntoView()}},100)}]),myApp.controller("DNSSHIMReleasesCtrl",["$scope","$http",function($scope,$http){$scope.releases={},$scope.getData=function(){$http.get("/tecnologia/dnsshim-data.json").success(function(data){$scope.releases=data}).error(function(){console.log("Error",arguments)})},$scope.getData()}]),myApp.controller("EPPReleasesCtrl",["$scope","$http",function($scope,$http){$scope.releases={},$scope.getData=function(){$http.get("/tecnologia/epp-data.json").success(function(data){$scope.releases=data}).error(function(){console.log("Error",arguments)})},$scope.getData()}]),$(function(){$(".navbar-nav .dropdown > a").click(function(){function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}var $this=$(this),$parent=getParent($this);$parent.hasClass("menu-open")?location.href=this.href:$parent.addClass("menu-open")}),$(".with-popover").popover({html:"true",trigger:"click",animation:"true",delay:"delay:{show: 200, hide: 100}"}),$(".with-popover-alert").popover({html:"true",trigger:"click",placement:"bottom",animation:"true",delay:"delay:{show: 200, hide: 100}",template:'<div class="popover popover-alert"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),$(".dropdown-menu").on("click",function(e){$(this).hasClass("dropdown-menu-form")&&e.stopPropagation()}),$(".accordion-toggle").click(function(){var divName=this.getElementsByTagName("div").item(0).className,selector="#"+this.id+" .btn-close div",onlyOneCollapsed=this.hasAttribute("data-parent")&&"#accordion"==this.getAttribute("data-parent");onlyOneCollapsed?"avancadas-down-topo"==divName?($(".btn-close div").removeClass("avancadas-up-topo").addClass("avancadas-down-topo"),$(selector).removeClass("avancadas-down-topo").addClass("avancadas-up-topo")):"avancadas-up-topo"==divName&&$(".btn-close div").removeClass("avancadas-up-topo").addClass("avancadas-down-topo"):"avancadas-down-topo"==divName?$(selector).removeClass("avancadas-down-topo").addClass("avancadas-up-topo"):"avancadas-up-topo"==divName&&$(selector).removeClass("avancadas-up-topo").addClass("avancadas-down-topo")}),$(".menu-search").hover(function(){$(".input-search").addClass("stretchLeft")}),$(".input-search").focusout(function(){$(".input-search").removeClass("stretchLeft")}),"undefined"!=typeof options&&$("#modal").modal(options)}),$(function(){var inputEntidade="#nova_entidade",formEntidadeSemCadastro="#formEntidadeSemCadastro",divEntidadeSemCadastro="#entidadeSemCadastro",labelNomeOuRazaoSocial="#nomeOuRazaoSocial",divResponsavel="#responsavelEntidade";if(0!=$("#cep").length||0!=$(inputEntidade).length||0!=$("#razao_nova_ent").length||0!=$("#cpf").length||0!=$("#cnpj").length){if($("#cep").mask("99999-999",{completed:consulta_cep}),""===$(inputEntidade).val())$("#cpf").is(":checked")?$(inputEntidade).val("").mask("999.999.999-99",{completed:entidade_existe}):$(inputEntidade).val("").mask("99.999.999/9999-99",{completed:entidade_existe});else{var valorAntigo=$(inputEntidade).val();$("#cpf").is(":checked")?$(inputEntidade).mask("999.999.999-99",{completed:entidade_existe}):$(inputEntidade).mask("99.999.999/9999-99",{completed:entidade_existe}),$(inputEntidade).val(valorAntigo),entidade_existe()}$("#razao_nova_ent").blur(function(){$("#novo_nome").val($("#razao_nova_ent").val())}),$("#cpf").click(function(){$(formEntidadeSemCadastro).css("visibility","visible"),$(divEntidadeSemCadastro).css("display","none"),$(labelNomeOuRazaoSocial).html("Nome"),$(divResponsavel).css("display","none"),$(inputEntidade).val("").mask("999.999.999-99",{completed:entidade_existe})}),$("#cnpj").click(function(){$(formEntidadeSemCadastro).css("visibility","visible"),$(divEntidadeSemCadastro).css("display","none"),$(labelNomeOuRazaoSocial).html("RazÃ£o Social"),$("#novo_nome").val(""),$(divResponsavel).css("display","block"),$(inputEntidade).val("").mask("99.999.999/9999-99",{completed:entidade_existe})}),exibirCampoResponsaveis()}}),myApp.controller("ReabController",ReabController),myApp.factory("globalData",function(){return{providers:[]}}),myApp.controller("PanelController",panelController),myApp.controller("DomainsCtrl",DomainsCtrl),myApp.controller("OrgsCtrl",OrgsCtrl),myApp.controller("MultiPaymentController",MultiPaymentController),myApp.controller("ProvidersCtrl",ProvidersCtrl),myApp.controller("ASesCtrl",ASesCtrl),myApp.filter("startFrom",function(){return function(input,start){return start=+start,input.slice(start)}}),myApp.filter("range",function(){return function(input,total){total=parseInt(total);for(var i=0;total>i;i++)input.push(i);return input}}),myApp.filter("iif",function(){return function(input,trueValue,falseValue){return input?trueValue:falseValue}}),myApp.controller("SPMController",SPMController);var updateDomainContactsURI="/cgi-bin/nicbr/update_domain_contacts",updateDomainReleaseProcessURI="/cgi-bin/nicbr/update_domain_release_process",transformPOST=function(data){var postData="";for(var key in data)postData.length>0&&(postData+="&"),postData+=key+"="+data[key];return postData};myApp.service("shared",function(){return{properties:{}}}).controller("GlobalCtrl",["$scope","$window","shared",function($scope,$window,shared){$scope.queroSaberTitular="<div style='text-align:left'>Documento (CPF/CNPJ) de quem Ã© titular do domÃ­nio. Essa informaÃ§Ã£o nÃ£o pode ser modificada pelo site, somente com envio de documentaÃ§Ã£o</div>",$scope.queroSaberContatos="<div style='text-align:left'>O contato administrativo pode alterar os servidores DNS e alterar os contatos tÃ©cnicos e de cobranÃ§a do domÃ­nio. O contato tÃ©cnico somente pode alterar os servidores DNS. O contato de cobranÃ§a recebe uma cÃ³pia dos avisos de cobranÃ§a do domÃ­nio</div>",$scope.caracteristicasTec="<div style='text-align:left'>Os servidores DNS sÃ£o responsÃ¡veis por fazer com que o seu domÃ­nio possa ser localizado na internet</div>",$scope.queroSaberPendencias="<div style='text-align:left'>Para que um domÃ­nio possa ser registrado, todas as pendÃªncias devem ser resolvidas</div>",$scope.queroSaberConcorrentes="<div style='text-align:left'>O ticket com menor numeraÃ§Ã£o possui prioridade no registro.  Se o solicitante nÃ£o resolver as pendÃªncias no prazo, o prÃ³ximo ticket da fila assumirÃ¡ a prioridade. Para domÃ­nios em processo de liberaÃ§Ã£o, verifique as regras <a href=\"/dominio/proclib.html\">aqui</a></div>",$scope.queroSaberProvedor="<div style='text-align:left'>Esta opÃ§Ã£o nÃ£o altera os servidores DNS ou seu provedor de hospedagem. Apenas selecione o provedor de serviÃ§os se solicitado pelo provedor. Um Provedor de ServiÃ§os Ã© uma empresa previamente homologada e certificada atravÃ©s de um contrato firmado com o Registro.br, para que o registro e a manutenÃ§Ã£o dos domÃ­nios e titulares (entidades) possam ser feitas atravÃ©s de uma interface especÃ­fica. <a href=\"/ajuda.html?secao=GerenciamentoConta&item=351\">Mais informaÃ§Ãµes</a></div>",$scope.readVars=function(id,ticket,fqdn){shared.properties.id=id,shared.properties.ticket=ticket,shared.properties.fqdn=fqdn,void 0!=$scope.id&&"0"!=$scope.id&&($scope.queroSaberPendencias="<div style='text-align:left'>As pendÃªncias devem ser resolvidas para que o domÃ­nio continue publicado</div>")},$scope.redirect=function(path){$window.location=path}}]).controller("ContactCtrl",domainContactController).controller("DNSCtrl",domainDNSController).controller("ProcLibCtrl",function($scope,$http,shared){$scope.updated=!1,$scope.errors=[],$scope.save=function(){var request={ticket:shared.properties.ticket,proclib:$scope.proclib};$http.post(updateDomainReleaseProcessURI,request,{transformRequest:transformPOST,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=iso-8859-1"}}).success(function(data){data.success?($scope.updated=!0,$scope.errors=[]):($scope.updated=!1,$scope.errors=data.errors)})}}),myApp.controller("orgControllerCtrl",["$scope","$http","shared",function($scope,$http){$scope.queroSaberContato="<div style='text-align:left'>Pessoa responsÃ¡vel pelo registro de novos domÃ­nios, alteraÃ§Ã£o dos outros contatos dos domÃ­nios registrados sob este documento e pela manutenÃ§Ã£o e atualizaÃ§Ã£o de dados cadastrais do titular.</div>",$scope.queroSaberProvedor="<div style='text-align:left'>Esta opÃ§Ã£o nÃ£o altera os servidores DNS ou seu provedor de hospedagem. Apenas selecione o provedor de serviÃ§os se solicitado pelo provedor. Um Provedor de ServiÃ§os Ã© uma empresa previamente homologada e certificada atravÃ©s de um contrato firmado com o Registro.br, para que o registro e a manutenÃ§Ã£o dos domÃ­nios e titulares (entidades) possam ser feitas atravÃ©s de uma interface especÃ­fica. <a href=\"/ajuda.html?secao=GerenciamentoConta&item=351\">Mais informaÃ§Ãµes</a></div>",$scope.zipFind=function(){var zip=$scope.zip.trim();return zip=zip.replace("-",""),zip.length<8?($scope.address="",$scope.city="",void($scope.state="")):void $http.get("/cgi-bin/nicbr/zip_find?zip="+zip).success(function(data){$scope.address=data.address,$scope.city=data.city,$scope.state=data.state})}}]),angular.module("availApp",["ngSanitize"]).controller("availCtrl",["$scope","$http",function($scope,$http){$scope.result="",$scope.checkAvail=function(){var query=$scope.qr.trim();$http.get("/cgi-bin/avail/?qr="+query).success(function(data){$scope.result=data})}}]),function(c,j){function k(a){return!c(a).parents().andSelf().filter(function(){return"hidden"===c.curCSS(this,"visibility")||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{},c.ui.version||(c.extend(c.ui,{version:"1.8.9",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return"number"==typeof a?this.each(function(){var d=this;setTimeout(function(){c(d).focus(),b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){if(b=a.css("position"),("absolute"===b||"relative"===b||"fixed"===b)&&(b=parseInt(a.css("zIndex"),10),!isNaN(b)&&0!==b))return b;a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),c.each(["Width","Height"],function(a,b){function d(f,g,l,m){return c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,!0))||0,l&&(g-=parseFloat(c.curCSS(f,"border"+this+"Width",!0))||0),m&&(g-=parseFloat(c.curCSS(f,"margin"+this,!0))||0)}),g}var e="Width"===b?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){return f===j?i["inner"+b].call(this):this.each(function(){c(this).css(h,d(this,f)+"px")})},c.fn["outer"+b]=function(f,g){return"number"!=typeof f?i["outer"+b].call(this,f):this.each(function(){c(this).css(h,d(this,f,!0,g)+"px")})}}),c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");return"area"===b?(b=a.parentNode,d=b.name,a.href&&d&&"map"===b.nodeName.toLowerCase()?(a=c("img[usemap=#"+d+"]")[0],!!a&&k(a)):!1):(/input|select|textarea|button|object/.test(b)?!a.disabled:"a"==b?a.href||!isNaN(d):!isNaN(d))&&k(a)},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}}),c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),c.support.minHeight=100===b.offsetHeight,c.support.selectstart="onselectstart"in b,a.removeChild(b).style.display="none"}),c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d)a.plugins[e]=a.plugins[e]||[],a.plugins[e].push([b,d[e]])},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(a,b){if("hidden"===c(a).css("overflow"))return!1;b=b&&"left"===b?"scrollLeft":"scrollTop";var d=!1;return a[b]>0?!0:(a[b]=1,d=a[b]>0,a[b]=0,d)},isOverAxis:function(a,b,d){return a>b&&b+d>a},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&c.ui.isOverAxis(b,e,i)}}))}(jQuery),function(d,G){function K(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._inDialog=this._datepickerShowing=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1},d.extend(this._defaults,this.regional[""]),this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function E(a,b){d.extend(a,b);for(var c in b)(null==b[c]||b[c]==G)&&(a[c]=b[c]);return a}d.extend(d.ui,{datepicker:{version:"1.8.9"}});var y=(new Date).getTime();d.extend(K.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return E(this._defaults,a||{}),this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase(),f="div"==e||"span"==e,a.id||(this.uuid+=1,a.id="dp"+this.uuid);var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{}),"input"==e?this._connectDatepicker(a,i):f&&this._inlineDatepicker(a,i)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'):this.dpDiv}
},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]),b.trigger=d([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)}),this._autoSize(b),d.data(a,"datepicker",b))},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");if(b.append&&b.append.remove(),c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[e?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove(),c=this._get(b,"showOn"),("focus"==c||"both"==c)&&a.focus(this._showDatepicker),"button"==c||"both"==c){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:d("<img/>").attr({src:f,alt:c,title:c}))),a[e?"before":"after"](b.trigger),b.trigger.click(function(){return d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++)f[g].length>h&&(h=f[g].length,i=g);return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.dpDiv.show())},_dialogDatepicker:function(a,b,c,e,f){return a=this._dialogInst,a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a)),E(a.settings,e||{}),b=b&&b.constructor==Date?this._formatDate(a,b):b,this._dialogInput.val(b),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),d.blockUI&&d.blockUI(this.dpDiv),d.data(this._dialogInput[0],"datepicker",a),this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker"),"input"==e?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==e||"span"==e)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();"input"==e?(a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"==e||"span"==e)&&b.children("."+this._inlineClass).children().removeClass("ui-state-disabled"),this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();"input"==e?(a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"==e||"span"==e)&&b.children("."+this._inlineClass).children().addClass("ui-state-disabled"),this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?d.extend({},d.datepicker._defaults):e?"all"==b?d.extend({},e.settings):this._get(e,b):null;var f=b||{};if("string"==typeof b&&(f={},f[b]=c),e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,!0);E(e.settings,f),this._attachments(d(a),e),this._autoSize(e),this._setDateDatepicker(a,h),this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){(a=this._getInst(a))&&(this._setDate(a,b),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(a,b){return(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b),a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=!0,e=b.dpDiv.is(".ui-datepicker-rtl");if(b._keyEvent=!0,d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker(),c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]?d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker(),!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,e?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,e?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==G?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">c||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){if(a=d.datepicker._getInst(a.target),a.input.val()!=a.lastVal)try{d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))&&(d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a))}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=d("input",a.parentNode)[0]),!d.datepicker._isDisabledDatepicker(a)&&d.datepicker._lastInput!=a){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(!0,!0);var c=d.datepicker._get(b,"beforeShow");E(b.settings,c?c.apply(a,[a,b]):{}),b.lastVal=null,d.datepicker._lastInput=a,d.datepicker._setDateFromField(b),d.datepicker._inDialog&&(a.value=""),d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var e=!1;if(d(a).parents().each(function(){return e|="fixed"==d(this).css("position"),!e}),e&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop),c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]},d.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),d.datepicker._updateDatepicker(b),c=d.datepicker._checkOffset(b,c,e),b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"}),!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){d.datepicker._datepickerShowing=!0;var i=b.dpDiv.find("iframe.ui-datepicker-cover");if(i.length){var g=d.datepicker._getBorders(b.dpDiv);i.css({left:-g[0],top:-g[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1),d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h),c&&f||h(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);a.dpDiv.empty().append(this._generateHTML(a));var e=a.dpDiv.find("iframe.ui-datepicker-cover");if(e.length&&e.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){d(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&d(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])||(d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&d(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&d(this).addClass("ui-datepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end(),c=this._getNumberOfMonths(a),e=c[1],e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a.dpDiv[(1!=c[0]||1!=c[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus(),a.yearshtml){var f=a.yearshtml;setTimeout(function(){f===a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),f=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();return b.left-=this._get(a,"isRTL")?e-h:0,b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0,b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0),b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+i):0),b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&("hidden"==a.type||1!=a.nodeType);)a=a[b?"previousSibling":"nextSibling"];return a=d(a).offset(),[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==d.data(a,"datepicker"))&&this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b),this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?c:null,e),a||e(),(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){d.datepicker._curInst&&(a=d(a.target),a[0].id!=d.datepicker._mainDivId&&0==a.parents("#"+d.datepicker._mainDivId).length&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker())},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate(),b.drawMonth=b.selectedMonth=c.getMonth(),b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b),this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e._selectingMonthYear=!1,e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(a)},_clickMonthYear:function(a){var b=this._getInst(d(a)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0),b._selectingMonthYear=!b._selectingMonthYear},_selectDay:function(a,b,c,e){var f=d(a);d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=d("a",e).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(a){a=d(a),this._getInst(a[0]),this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]),b=null!=b?b:this._formatDate(a),a.input&&a.input.val(b),this._updateAlternate(a);var c=this._get(a,"onSelect");c?c.apply(a.input?a.input[0]:null,[b,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){return a=a.getDay(),[a>0&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime()),a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((b-a)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(b="object"==typeof b?b.toString():b+"",""==b)return null;var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10);for(var f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,j=c=-1,l=-1,u=-1,k=!1,o=function(p){return(p=z+1<a.length&&a.charAt(z+1)==p)&&z++,p},m=function(p){var v=o(p);if(p=new RegExp("^\\d{1,"+("@"==p?14:"!"==p?20:"y"==p&&v?4:"o"==p?3:2)+"}"),p=b.substring(s).match(p),!p)throw"Missing number at position "+s;return s+=p[0].length,parseInt(p[0],10)},n=function(p,v,H){for(p=o(p)?H:v,v=0;v<p.length;v++)if(b.substr(s,p[v].length).toLowerCase()==p[v].toLowerCase())return s+=p[v].length,v+1;throw"Unknown name at position "+s},r=function(){if(b.charAt(s)!=a.charAt(z))throw"Unexpected literal at position "+s;s++},s=0,z=0;z<a.length;z++)if(k)"'"!=a.charAt(z)||o("'")?r():k=!1;else switch(a.charAt(z)){case"d":l=m("d");break;case"D":n("D",f,h);break;case"o":u=m("o");break;case"m":j=m("m");break;case"M":j=n("M",i,g);break;case"y":c=m("y");break;case"@":var w=new Date(m("@"));c=w.getFullYear(),j=w.getMonth()+1,l=w.getDate();break;case"!":w=new Date((m("!")-this._ticksTo1970)/1e4),c=w.getFullYear(),j=w.getMonth()+1,l=w.getDate();break;case"'":o("'")?r():k=!0;break;default:r()}if(-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e>=c?0:-100)),u>-1)for(j=1,l=u;;){if(e=this._getDaysInMonth(c,j-1),e>=l)break;j++,l-=e}if(w=this._daylightSavingAdjust(new Date(c,j-1,l)),w.getFullYear()!=c||w.getMonth()+1!=j||w.getDate()!=l)throw"Invalid date";return w},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var i=function(o){return(o=k+1<a.length&&a.charAt(k+1)==o)&&k++,o},g=function(o,m,n){if(m=""+m,i(o))for(;m.length<n;)m="0"+m;return m},j=function(o,m,n,r){return i(o)?r[m]:n[m]},l="",u=!1;if(b)for(var k=0;k<a.length;k++)if(u)"'"!=a.charAt(k)||i("'")?l+=a.charAt(k):u=!1;else switch(a.charAt(k)){case"d":l+=g("d",b.getDate(),2);break;case"D":l+=j("D",b.getDay(),e,f);break;case"o":l+=g("o",(b.getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5,3);break;case"m":l+=g("m",b.getMonth()+1,2);break;case"M":l+=j("M",b.getMonth(),h,c);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":u=!0;break;default:l+=a.charAt(k)}return l},_possibleChars:function(a){for(var b="",c=!1,e=function(h){return(h=f+1<a.length&&a.charAt(f+1)==h)&&f++,h},f=0;f<a.length;f++)if(c)"'"!=a.charAt(f)||e("'")?b+=a.charAt(f):c=!1;else switch(a.charAt(f)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":e("'")?b+="'":c=!0;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return a.settings[b]!==G?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var f,h,c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null;f=h=this._getDefaultDate(a);var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g),e=b?"":e}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=e?f.getDate():0,a.currentMonth=e?f.getMonth():0,a.currentYear=e?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;return i.setDate(i.getDate()+h),i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,j=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,k=u.exec(h);k;){switch(k[2]||"d"){case"d":case"D":g+=parseInt(k[1],10);break;case"w":case"W":g+=7*parseInt(k[1],10);break;case"m":case"M":l+=parseInt(k[1],10),g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break;case"y":case"Y":j+=parseInt(k[1],10),g=Math.min(g,d.datepicker._getDaysInMonth(j,l))}k=u.exec(h)}return new Date(j,l,g)};return(b=(b=null==b||""===b?c:"string"==typeof b?f(b):"number"==typeof b?isNaN(b)?c:e(b):new Date(b.getTime()))&&"Invalid Date"==b.toString()?c:b)&&(b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0)),this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date)),a.selectedDay=a.currentDay=b.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth(),a.drawYear=a.selectedYear=a.currentYear=b.getFullYear(),f==a.selectedMonth&&h==a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),l=1!=i[0]||1!=i[1],u=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),k=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(0>g&&(g+=12,m--),o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=k&&k>n?k:n;this._daylightSavingAdjust(new Date(m,g,1))>n;)g--,0>g&&(g=11,m--)}a.drawMonth=g,a.drawYear=m,n=this._get(a,"prevText"),n=h?this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-j,1)),this._getFormatConfig(a)):n,n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var r=this._get(a,"nextText");r=h?this.formatDate(r,this._daylightSavingAdjust(new Date(m,g+j,1)),this._getFormatConfig(a)):r,f=this._canAdjustMonth(a,1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>",j=this._get(a,"currentText"),r=this._get(a,"gotoCurrent")&&a.currentDay?u:b,j=h?this.formatDate(j,r,this._getFormatConfig(a)):j,h=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,r)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":h)+"</div>":"",h=parseInt(this._get(a,"firstDay"),10),h=isNaN(h)?0:h,j=this._get(a,"showWeek"),r=this._get(a,"dayNames"),this._get(a,"dayNamesShort");var s=this._get(a,"dayNamesMin"),z=this._get(a,"monthNames"),w=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),v=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var L=this._getDefaultDate(a),I="",C=0;C<i[0];C++){for(var M="",D=0;D<i[1];D++){var N=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",x="";if(l){if(x+='<div class="ui-datepicker-group',i[1]>1)switch(D){case 0:x+=" ui-datepicker-group-first",t=" ui-corner-"+(c?"right":"left");break;case i[1]-1:x+=" ui-datepicker-group-last",t=" ui-corner-"+(c?"left":"right");break;default:x+=" ui-datepicker-group-middle",t=""}x+='">'}x+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&0==C?c?f:n:"")+(/all|right/.test(t)&&0==C?c?n:f:"")+this._generateMonthYearHeader(a,g,m,k,o,C>0||D>0,z,w)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var A=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;7>t;t++){var q=(t+h)%7;A+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+r[q]+'">'+s[q]+"</span></th>"}x+=A+"</tr></thead><tbody>",A=this._getDaysInMonth(m,g),m==a.selectedYear&&g==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,A)),t=(this._getFirstDayOfMonth(m,g)-h+7)%7,A=l?6:Math.ceil((t+A)/7),q=this._daylightSavingAdjust(new Date(m,g,1-t));for(var O=0;A>O;O++){x+="<tr>";var P=j?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(q)+"</td>":"";for(t=0;7>t;t++){var F=p?p.apply(a.input?a.input[0]:null,[q]):[!0,""],B=q.getMonth()!=g,J=B&&!H||!F[0]||k&&k>q||o&&q>o;P+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(q.getTime()==N.getTime()&&g==a.selectedMonth&&a._keyEvent||L.getTime()==q.getTime()&&L.getTime()==N.getTime()?" "+this._dayOverClass:"")+(J?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+F[1]+(q.getTime()==u.getTime()?" "+this._currentClass:"")+(q.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(B&&!v||!F[2]?"":' title="'+F[2]+'"')+(J?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(B&&!v?"&#xa0;":J?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==b.getTime()?" ui-state-highlight":"")+(q.getTime()==u.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>",q.setDate(q.getDate()+1),q=this._daylightSavingAdjust(q)}x+=P+"</tr>"}g++,g>11&&(g=0,m++),x+="</tbody></table>"+(l?"</div>"+(i[0]>0&&D==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=x}I+=M}return I+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,I},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var j=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',o="";if(h||!j)o+='<span class="ui-datepicker-month">'+i[b]+"</span>";else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";for(var n=0;12>n;n++)(!i||n>=e.getMonth())&&(!m||n<=f.getMonth())&&(o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>");o+="</select>"}if(u||(k+=o+(!h&&j&&l?"":"&#xa0;")),a.yearshtml="",h||!l)k+='<span class="ui-datepicker-year">'+c+"</span>";else{g=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();for(i=function(s){return s=s.match(/c[+-].*/)?c+parseInt(s.substring(1),10):s.match(/[+-].*/)?r+parseInt(s,10):parseInt(s,10),isNaN(s)?r:s},b=i(g[0]),g=Math.max(b,i(g[1]||"")),b=e?Math.max(b,e.getFullYear()):b,g=f?Math.min(g,f.getFullYear()):g,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";g>=b;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>",d.browser.mozilla?k+='<select class="ui-datepicker-year"><option value="'+c+'" selected="selected">'+c+"</option></select>":(k+=a.yearshtml,a.yearshtml=null)}return k+=this._get(a,"yearSuffix"),u&&(k+=(!h&&j&&l?"":"&#xa0;")+o),k+="</div>"},_adjustInstDate:function(a,b,c){var e=a.drawYear+("Y"==c?b:0),f=a.drawMonth+("M"==c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+("D"==c?b:0),e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b))),a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");return a=this._getMinMaxDate(a,"max"),b=c&&c>b?c:b,b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){return a=this._get(a,"numberOfMonths"),null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-new Date(a,b,32).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);return c=this._daylightSavingAdjust(new Date(c,e+(0>b?b:f[0]*f[1]),1)),0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth())),this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");return a=this._getMinMaxDate(a,"max"),(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){return b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear),b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay)),this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}}),d.fn.datepicker=function(a){d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)}):d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))},d.datepicker=new K,d.datepicker.initialized=!1,d.datepicker.uuid=(new Date).getTime(),d.datepicker.version="1.8.9",window["DP_jQuery_"+y]=d}(jQuery),$(function(){var process=$("#process"),processImage=$("#process-image");process.click(function(){process.hide(),processImage.css("display","inline-block")
})}),myApp.controller("userController",["$scope","$http","shared",function($scope,$http,shared){$scope.showLogin=function(){return shared.properties.login},$scope.zipFind=function(zip){return zip=zip.replace("-",""),zip.length<8?($scope.address.street="",$scope.address.city="",void($scope.address.state="")):void $http.get("/cgi-bin/nicbr/zip_find?zip="+zip).success(function(data){$scope.address.street=data.address,$scope.address.city=data.city,$scope.address.state=data.state})}}]),myApp.controller("docController",["$scope","shared",function($scope,shared){$scope.setDocument=function(){$scope.domain.doc&&($scope.domain.doc=formatDocument($scope.domain.doc),shared.properties.document=$scope.domain.doc,$scope.docType=getDocumentType($scope.domain.doc),shared.properties.docType=$scope.docType)},$scope.showLogin=function(){$scope.login=!0,shared.properties.login=!0}}]),myApp.controller("orgController",["$scope","$http","shared",function($scope,$http,shared){$scope.edoc=function(){return shared.properties.document},$scope.docType=function(){return shared.properties.docType},$scope.orgName=function(){return"CNPJ"==$scope.docType()?"RazÃ£o Social":"Nome do Titular"},$scope.showLogin=function(){return shared.properties.login},$scope.zipFind=function(){var ecep=$scope.ecep.trim();return ecep=ecep.replace("-",""),ecep.length<8?($scope.elograd="",$scope.ecidade="",void($scope.euf="")):void $http.get("/cgi-bin/nicbr/zip_find?zip="+ecep).success(function(data){$scope.elograd=data.address,$scope.ecidade=data.city,$scope.euf=data.state})}}]),myApp.controller("msgController",["$scope",function(){}]);var graphTypes=new Array,buttonLabels=new Array,imgNames=new Array;graphTypes[0]="graph-month",graphTypes[1]="graph-year",graphTypes[2]="graph-all",buttonLabels[0]="Ãºltimo mÃªs",buttonLabels[1]="Ãºltimo ano",buttonLabels[2]="desde 1996",imgNames[0]="_1m",imgNames[1]="_1a",imgNames[2]="_2a";var graphTitles={};graphTitles.gen="Total GenÃ©ricos",graphTitles.pf="Total Pessoas FÃ­sicas",graphTitles.pl="Total Profissionais Liberais",graphTitles.univ="Total Universidades",graphTitles.ent="Total Pessoas JurÃ­dicas",graphTitles.idna="IDNA",graphTitles.dnssec="DNSSEC",graphTitles.dns="Servidores DNS irregulares",graphTitles.dnssecerr="Servidores DNSSEC irregulares",window.onload=function(){var str=window.location.search.substring(1,10);str.length>0&&statModal(decodeURI(str))},$(".statPL").hide(),$("#statPLshow").click(function(){$(".statPL").show(),$("#statPLshow").hide()}),$(".statPJcomRestricao").hide(),$("#statPJcomRestricaoShow").click(function(){$(".statPJcomRestricao").show(),$("#statPJcomRestricaoShow").hide()}),$(".statPJsemRestricao").hide(),$("#statPJsemRestricaoShow").click(function(){$(".statPJsemRestricao").show(),$("#statPJsemRestricaoShow").hide()}),$(function(){exibirCampoResponsaveis()}),myApp.controller("idmngController",["$scope","$http",function($scope,$http){$scope.zipFind=function(){var zip=$scope.user.zip.trim();return zip=zip.replace("-",""),zip.length<8?($scope.user.address="",$scope.user.city="",void($scope.user.state="")):void $http.get("/cgi-bin/nicbr/zip_find?zip="+zip).success(function(data){$scope.user.address=data.address,$scope.user.city=data.city,$scope.user.state=data.state})}}]),myApp.controller("paymentController",PaymentController),$(function(){gerarMascara(),exibirCampoResponsaveis(),$("#id").focus()});